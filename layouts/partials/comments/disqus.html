<div id="disqus_thread">
  <script type="text/javascript">
    (function() {
      // Avoid initializing Disqus on localhost to prevent discussions from being created unintentionally
      if (window.location.hostname === "localhost") {
        console.log("Disqus not initialized on localhost.");
        return;
      }

      // Use Hugo's templating to fetch the Disqus shortname
      var disqus_shortname = "{{ .Site.DisqusShortname | default (.Site.Title | lower | urlize) }}";
      
      if (!disqus_shortname) {
        console.error("Disqus shortname is not configured. Please add it to your site configuration.");
        return;
      }

      // Create the Disqus embed script
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';

      // Append the script to the <head> or <body>
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>
    Please enable JavaScript to view the 
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.
  </noscript>
  <a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
